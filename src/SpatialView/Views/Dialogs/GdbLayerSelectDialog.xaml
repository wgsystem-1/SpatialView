<Window x:Class="SpatialView.Views.Dialogs.GdbLayerSelectDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="FileGDB 레이어 선택"
        Width="640" Height="440"
        WindowStartupLocation="CenterOwner"
        Style="{StaticResource MaterialDesignWindow}"
        Background="{DynamicResource MaterialDesignPaper}">
    
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,12">
            <TextBlock Text="레이어 선택" 
                       Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                       Margin="0,0,0,4"/>
            <TextBlock x:Name="GdbPathText" 
                       TextWrapping="Wrap"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"
                       FontSize="12"/>
        </StackPanel>
        
        <!-- Layer List -->
        <Border Grid.Row="1" 
                BorderBrush="{DynamicResource MaterialDesignDivider}" 
                BorderThickness="1"
                CornerRadius="4">
            <ListView x:Name="LayerListView"
                      SelectionMode="Extended"
                      VirtualizingStackPanel.IsVirtualizing="True"
                      GridViewColumnHeader.Click="GridViewColumnHeader_Click">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="40">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                              Click="CheckBox_Click"
                                              VerticalAlignment="Center"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Width="260" DisplayMemberBinding="{Binding Name}">
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Tag="Name" Content="레이어 이름 ↕"/>
                            </GridViewColumn.Header>
                        </GridViewColumn>
                        <GridViewColumn Width="100" DisplayMemberBinding="{Binding FeatureCount}">
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Tag="FeatureCount" Content="피처 수 ↕"/>
                            </GridViewColumn.Header>
                        </GridViewColumn>
                        <GridViewColumn Width="140" DisplayMemberBinding="{Binding GeometryType}">
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Tag="GeometryType" Content="유형 ↕"/>
                            </GridViewColumn.Header>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>
            </ListView>
        </Border>
        
        <!-- Selection Controls -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
            <Button Content="전체 선택" 
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="SelectAll_Click"
                    Margin="0,0,8,0"
                    Height="30"/>
            <Button Content="선택 해제" 
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="DeselectAll_Click"
                    Height="30"/>
            <TextBlock x:Name="SelectionCountText" 
                       VerticalAlignment="Center"
                       Margin="16,0,0,0"
                       Foreground="{DynamicResource MaterialDesignBodyLight}"/>
        </StackPanel>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,16,0,0">
            <Button Content="취소" 
                    Style="{StaticResource MaterialDesignOutlinedButton}"
                    Click="Cancel_Click"
                    Width="80"
                    Margin="0,0,8,0"/>
            <Button Content="열기" 
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Click="OK_Click"
                    Width="80"/>
        </StackPanel>
    </Grid>
</Window>

